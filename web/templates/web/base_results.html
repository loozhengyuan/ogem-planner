{% extends 'web/base.html' %}
{% load static %}

{% block css %}
<style>
    .header-image {
        background-image: url("https://images.unsplash.com/photo-1506606401543-2e73709cebb4?ixlib=rb-0.3.5&s=f39ed3f2a0d29246044b36acdd254460&auto=format&fit=crop&w=1350&q=80");
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
        background-color: rgba(0, 0, 0, 0);
    }
</style>
{% endblock %}

{% block body %}
<section class="hero is-primary is-medium header-image">
    <!-- Hero content: will be in the middle -->
    <div class="hero-body">
        <div class="container has-text-centered">
            <div class="columns is-mobile is-centered">
                <div class="column is-half-desktop is-three-quarters-tablet">
                    <form action="{% url 'results' %}" method="POST">
                        {% csrf_token %}
                        <h1 class="title is-1" style="font-family: 'Montserrat', sans-serif;">
                            I want to clear..
                        </h1>
                        <div class="field has-addons">
                            <p class="control is-expanded">
                                <input class="input is-medium" id="courses" name="courses" placeholder="Enter NBS Course Codes (comma-seperated)"
                                    style="font-family: 'Roboto', sans-serif;">
                            </p>
                            <p class="control">
                                <button type="submit" class="button is-info is-medium" style="font-family: 'Roboto', sans-serif;">
                                    Search
                                </button>
                            </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="hero">
    <div class="hero-body">
        <div class="container">
            <div class="modal">
                <div class="modal-background"></div>
                <div class="modal-content">
                    <!-- Any other Bulma elements you want -->
                </div>
                <button class="modal-close is-large" aria-label="close"></button>
            </div>
            {% if universities %}
            <h1 class="title">
                Search Results
            </h1>
            <h5 class="subtitle">
                Matches may be inaccurate, click on the Info button to learn more
            </h5>
            <table class="table is-narrow is-striped">
                <thead>
                    <tr>
                        <th><abbr title="Rank">Rank</abbr></th>
                        <th><abbr title="Host University">Host Uni</abbr></th>
                        <th><abbr title="Total Clearable">Total Matches</abbr></th>
                        <th><abbr title="Additional Info">Info</abbr></th>
                    </tr>
                </thead>
                <tbody>
                    {% for uni in universities %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ uni.name }}</td>
                        <td>{{ uni.total_clearable }}</td>
                        <td><a href="{% url 'hostuni' uni.id %}">Link</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <h1 class="title">
                No results found!
            </h1>
            <h5 class="subtitle">
                Check if you typed the correct course code
            </h5>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

{% block js %}
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script>
    $(document).ready(function () {
        // Check for click events on the navbar burger icon
        $(".navbar-burger").click(function () {

            // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
            $(".navbar-burger").toggleClass("is-active");
            $(".navbar-menu").toggleClass("is-active");

        });
    });
</script>
{% endblock %}